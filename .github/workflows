name: Update cards from Google Sheets

on:
  schedule:
    - cron: '0 0 * * *' # –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 03:00 –ø–æ UTC
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
      uses: actions/checkout@v3

    - name: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
      run: npm install

    - name: –ó–∞–ø—É—Å—Ç–∏—Ç—å update_cards.js
      run: node update_cards.js

    - name: –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
      run: |
        git config --global user.name "GitHub Actions"
        git config --global user.email "actions@github.com"
        git add index.html
        git commit -m "ü§ñ auto: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ index.html –∏–∑ Google Sheets" || echo "–ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π"
        git push
